import re
import wordcloud
import matplotlib.pyplot as plt
import numpy as np
from PIL import Image

text = open("../第三次实验材料/三国演义utf8.txt","r",encoding="utf-8").read()

text = re.sub("[^\u4e00-\u9fa5]", "", text)

names=["白寿","鲍隆","鲍信","鲍忠","卑衍","北斗","边洪","边让","卞喜","邴原","步阐","步骘","蔡和","蔡林","蔡瑁","蔡勋","蔡埙",
       "蔡琰","蔡阳","蔡邕","蔡中","曹昂","曹豹","曹操","曹纯","曹德","曹璜","曹节","曹芳","曹洪","曹奂","曹据","曹髦","曹霖",
       "曹丕","曹仁","曹睿","曹氏","曹嵩","曹爽","曹腾","曹羲","曹性","曹熊","曹盱","曹训","曹彦","曹永","曹宇","曹休","曹彰",
       "曹真","曹植","曹遵","昌奇","昌豨","常雕","车胄","毕轨","陈蕃","陈登","陈耽","陈宫","陈珪","陈横","陈纪","陈矫","陈就",
       "陈俊","陈兰","陈琳","陈骞","陈群","陈生","陈式","陈孙","陈泰","陈炜","陈武","陈翔","陈应","陈元","陈造","陈震","岑璧",
       "岑昏","岑威","岑晊","程秉","程畿","程旷","程普","程武","程银","程昱","程咨","成倅","成何","成济","成廉","成宜","崔谅",
       "崔烈","崔琰","崔毅","崔勇","崔禹","爨习","戴陵","戴员","党均","邓艾","邓程","邓敦","邓良","邓龙","邓茂","邓铜","邓贤",
       "邓飏","邓义","邓禹","邓芝","邓忠","典满","典韦","貂蝉","丁斐","丁奉","丁封","丁管","丁立","丁谧","邓士载","邓玄茂",
       "邓伯苗","丁咸","丁仪","丁廙","丁原","董超","董朝","董承","董和","董衡","董璜","董晃","董厥","董旻","董祀","董禧","董袭",
       "董寻","董允","董昭","董重","董卓","窦武","督邮","度尚","杜路","杜祺","杜琼","杜睿","杜微","杜袭","杜义","杜预","杜远",
       "段珪","段煨","鄂焕","法真","法正","樊稠","樊建","樊能","樊岐","樊氏","范成","范疆","范康","范滂","方悦","费观","费诗",
       "费耀","费祎","封谞","冯礼","冯习","冯紞","逢纪","伏德","伏完","傅佥","傅干","傅嘏","傅彤","傅巽","傅婴","关平","关索",
       "关兴","关彝","关羽","管亥","管辂","管宁","郭常","郭恩","郭嘉","郭淮","郭胜","郭汜","郭图","郭奕","郭永","甘宁","干休",
       "高定","高干","高览","高沛","高柔","高升","高顺","高翔","葛雍","戈定","耿纪","耿武","龚都","龚景","龚起","巩志","苟安",
       "谷利","顾雍","妫览","官雝","关纯","关定","关宁","郝萌","郝昭","韩当","韩德","韩福","韩馥","韩浩","韩暨","韩猛","韩琪",
       "韩琼","韩融","韩嵩","韩遂","韩暹","韩珩","韩玄","韩瑶","韩胤","韩瑛","韩忠","韩综","何后","何进","何曼","何苗","何平",
       "何晏","何仪","何顒","何植","何曾","何宗","和洽","侯成","侯览","侯选","胡班","胡才","胡冲","胡奋","胡华","胡济","胡烈",
       "胡邈","胡渊","胡轸","胡质","胡忠","胡遵","花永","华核","华佗","华歆","华雄","桓范","桓嘉","桓阶","桓彝","黄崇","黄盖",
       "黄皓","黄奎","黄权","黄劭","黄琬","黄忠","黄祖","霍戈","霍峻","吉邈","吉穆","吉平","纪灵","贾充","贾范","贾华","贾逵",
       "贾诩","简雍","姜冏","姜维","姜叙","蒋班","蒋斌","蒋干","蒋济","蒋奇","蒋钦","蒋舒","蒋琬","蒋显","蒋延","焦炳","焦伯",
       "焦触","焦彝","金尚","金旋","金祎","靳祥","沮鹄","沮授","句安","阚泽","孔融","孔秀","孔昱","孔伷","孔宙","寇封","蒯良",
       "蒯越","来敏","赖恭","雷薄","雷铜","雷叙","泠苞","李别","李崇","李典","李丰","李封","李服","李福","李伏","李孚","李辅",
       "李珪","李虎","李恢","李傕","李乐","李蒙","李鹏","李球","李儒","李胜","李氏","李肃","李通","李歆","李暹","李严","李意",
       "李异","李膺","李撰","廖淳","廖化","梁刚","梁畿","梁宽","梁虔","梁兴","梁绪","凌操","凌统","留平","留赞","刘艾","刘安",
       "刘巴","刘豹","刘备","刘辩","刘邠","刘禅","刘苌","刘谌","刘丞","刘宠","刘达","刘岱","刘度","刘范","刘放","刘封","刘馥",
       "刘璝","刘郃","刘弘","刘恢","刘表","刘晙","刘理","刘瑁","刘泌","刘敏","刘宁","刘磐","刘辟","刘琦","刘璩","刘璿","刘劭",
       "刘胜","刘氏","刘睃","刘寔","刘陶","刘琬","刘熙","刘先","刘贤","刘协","刘雄","刘勋","刘循","刘恂","刘焉","刘延","刘琰",
       "刘瑶","刘繇","刘晔","刘廙","刘永","刘虞","刘瓒","刘璋","刘贞","刘琮","柳甫","楼玄","卢逊","卢植","鲁馗","鲁肃","鲁芝",
       "陆绩","陆景","陆骏","陆凯","陆康","陆抗","陆纾","陆逊","陆议","路昭","吕霸","吕布","吕常","吕岱","吕范","吕公","吕建",
       "吕据","吕凯","吕旷","吕蒙","吕虔","吕翔","吕义","伦直","骆统","吕通","马超","马岱","马汉","马谡","马钧","马良","马邈","马融","马肃","马腾","马铁","马玩","马休","马延","马宇","马玉","马忠","马遵","满宠","毛玠","孟达","孟光","孟获","孟节","孟坦","孟优","孟宗","糜芳","糜竺","祢衡","迷当","闵贡","苗泽","穆顺","南斗","宁随","牛辅","牛金","潘凤","潘举","潘浚","潘遂","潘隐","潘璋","庞德","庞会","庞柔","庞舒","庞统","凤雏","庞羲","庞义","裴景","裴秀","裴绪","彭安","彭伯","彭和","彭羕","普净","牵弘","蹇硕","桥蕤","桥玄","乔瑁","大乔","小乔","谯周","秦朗","秦良","秦宓","秦明","秦琪","丘本","丘建","区星","麴义","全端","全纪","全尚","全祎","全怿","全琮","任峻","任夔","山涛","邵悌","申耽","申仪","审配","沈莹","盛勃","施朔","师纂","石苞","史涣","史迹","司蕃","孙恭","孙观","孙皓","孙和","孙河","孙桓","孙冀","孙坚","孙皎","孙静","孙据","孙峻","孙闿","孙楷","孙匡","孙朗","孙礼","孙亮","孙谦"," 孙权","孙仁","孙韶","孙歆","孙休","孙秀","孙翊","孙异","孙资","孙仲","宋白","宋果","宋谦","宋宪","宋忠","苏双","苏由","苏顒","苏越","眭固","孙策","孙綝","孙登","孙恩","孙干","孙乾","孙高","蹋顿","檀敷","谭雄","唐彬","唐妃","唐周","唐咨","陶谦","陶商","陶应","滕胤","田畴","田丰","田楷","田氏","田续","田豫","田章","土安","万彧","万政","汪昭","王必","王粲","王昶","王昌","王敦","王方","王甫","王观","王瓘","王含","王垕","王浑","王基","王建","王经","王楷","王伉","王匡","王朗","王累","王立","王连","王买","王谋","王平","王颀","王浚","王戎","王沈","王肃","王双","王邑","王允","王则","王真","王植","王忠","王韬","王威","王祥","王修","王琰","王业","韦晃","韦康","卫瓘","卫弘","卫凯","卫演","魏邈","魏续","魏延","文丑","文虎","文聘","文钦","文淑","文鸯","伍孚","伍琼","伍习","伍延","吾粲","吾彦","吴班","吴敦","吴纲","吴景","吴匡","吴兰","吴硕","吴懿","吴质","奚泥","郗虑","膝循","郤正","夏恂","夏恽","向宠","向朗","向举","谢旌","谢雄","辛敞","辛毗","辛评","邢贞","许昌","许褚","许慈","许贡","许靖","许韶","许劭","许汜","许攸","许晏","许仪","许允","许芝","徐晃","徐康","徐璆","徐荣","徐商","徐盛","徐氏","徐庶","徐质","荀谌","荀绲","荀恺","荀爽","荀勖","荀顗","荀攸"," 荀彧","荀恽","荀正","薛兰","薛礼","薛乔","薛悌","薛珝","薛莹","薛则","薛综","雅丹","严纲","严畯","严氏","严颜","严舆","严政","颜良","阎圃","阎晏","阎宇","阎芝","晏明","杨昂","杨柏","杨彪","杨丑"," 杨锋","杨奉","杨阜","杨洪","杨怀","杨济","杨暨","杨龄","杨陵","杨密","杨琦","杨秋","杨任","杨松","杨欣","杨修","杨仪","杨顒","杨综","杨祚","阳群","伊籍","殷纯","殷馗","阴夔","尹奉","尹楷","尹礼","尹默","尹赏","应劭","雍闿","俞涉","于吉","于禁","于糜","于诠","虞翻","虞松","越吉","乐綝","乐进","乐就","袁綝","袁隗","袁逢","袁尚","袁绍","袁术","袁谭","袁熙","袁遗","袁胤","爰青","爰邵","云当","张郃","张横","张衡","张纮","张虎","张华","张缉","张济","张既","张俭","张角","张举","张钧","张峻","张闿","张梁","张辽","张陵","张鲁","张茂","张弥","张明","张邈","张南","张普","张球","张让","张任","张尚","张绍","张松","张肃","张爽","张韬","张特","张悌","张卫","张温","张武","张先","张象","张休","张绣","张勋","张燕","张杨","张嶷","张顗","张裔","张翼","张音","张英","张约","张允","张昭","张著","张遵","赵昂","赵岑","赵范","赵广","赵弘","赵累","赵萌","赵岐","赵衢","赵融","赵睿","赵统","赵韪","赵颜","赵彦","赵月"," 赵云","赵直","赵忠","赵咨","赵祚","郑宝","郑度","郑伦","郑袤","郑泰","郑文","郑玄","脂习","钟会","钟进","钟缙","钟绅","钟繇","钟毓","种拂","种辑","种邵","周仓","周鲂","周奂","周毖","周平","周群","周善","周泰","周昕","周循","周胤","周瑜","周旨","州泰","朱褒","朱恩","朱芳","朱桓","朱儁","朱灵","朱然","朱异","朱赞","朱治","伏龙","卓膺","宗宝","宗预","邹靖","邹氏","祖弼","祖郎","祖茂","左丰","左灵","左咸"]

names_count = {name: 0 for name in names}

for name in names:
    count = len(re.findall(name, text))
    names_count[name] = count

names_count = sorted(names_count.items(), key=lambda x: x[1], reverse=True)
print(names_count[:15])

mask = np.array(Image.open("shape.png"))
wc = wordcloud.WordCloud(font_path="C:/Windows/Fonts/simhei.ttf", width=800, height=600, background_color="white",mask=mask)
wc.generate_from_frequencies(dict(names_count[:30]))

plt.imshow(wc, interpolation='bilinear')
plt.axis('off')
plt.show()

# Output:
# [('曹操', 945), ('吕布', 365), ('魏延', 322), ('姜维', 313), ('刘备', 297), ('袁绍', 251), ('周瑜', 241), ('马超', 219), ('邓艾', 194), ('黄忠', 189), ('张郃', 184), ('孟获', 161), ('张辽', 147), ('曹仁', 145), ('徐晃', 139)]